window.PuiTheme=window.PuiTheme||{};(function(a,b){a.AccordionHtml=function(c){var d=this;d._options=b.extend(true,{},d._defaults,c||{});if(d._options.allClosable===false&&d._options.multiOpen===true){d._options.allClosable=true}};b.extend(a.AccordionHtml,{_instances:{},_defaultInstance:"_default",initWidget:function(f,e,d){var c=a.AccordionHtml._getInstance(d);if(typeof c==="undefined"){c=new a.AccordionHtml(f);a.AccordionHtml._setInstance(c,d)}c.init(e);return c},_getInstance:function(c){if(typeof c==="undefined"){c=a.AccordionHtml._defaultInstance}return a.AccordionHtml._instances[c]},_setInstance:function(c,d){if(typeof d==="undefined"){d=a.AccordionHtml._defaultInstance}a.AccordionHtml._instances[d]=c}});b.extend(a.AccordionHtml.prototype,{_defaults:{selectors:{html:"html",component:".html-c-accordion",accordionItem:".html-b-accordion-item",accordionItemHeading:".html-b-accordion-item-heading",accordionItemContent:".html-b-accordion-item-content"},cssClasses:{isExpanded:"html-is-expanded",isCollapsed:"html-is-collapsed",isClosable:"html-is-closable"},allClosable:true,multiOpen:false,initiallyOpenedItems:[],closingActionRecentlyTriggered:false},_options:{},_eventNamespace:".AccordionHtml",_initEvents:function(d){var c=this;c._initMouseEvents(d);c._initKeyboardEvents(d);c._initFocusEvents(d)},_initMarkupEnhancement:function(j){var h=this;var e=h._options;var g=e.selectors;var f=e.cssClasses;var d=e.multiOpen?e.initiallyOpenedItems:e.initiallyOpenedItems.slice(0,1);var i=j.children(g.accordionItem);var c=i.children(g.accordionItemHeading);i.each(function(k,l){var m=b(l);d.indexOf(k+1)>=0?m.addClass(f.isExpanded):m.removeClass(f.isExpanded).addClass(f.isCollapsed)});if(!e.allClosable&&!e.initiallyOpenedItems.length){i.eq(0).removeClass(f.isCollapsed).addClass(f.isExpanded)}if(e.allClosable){j.addClass(f.isClosable)}c.attr("tabindex",0)},_initMouseEvents:function(c){var f=this;var d=f._options;var e=d.selectors;var g=c.children(e.accordionItem).children(e.accordionItemHeading);g.off("mousedown"+f._eventNamespace).on("mousedown"+f._eventNamespace,function(){f._toggleItemVisibility(c,this)})},_initKeyboardEvents:function(c){var f=this;var d=f._options;var e=d.selectors;var h=c.children(e.accordionItem).children(e.accordionItemHeading);var g=Array.prototype.slice.call(h);h.off("keyup"+f._eventNamespace).on("keyup"+f._eventNamespace,function(m){if((m.which===b.ui.keyCode.ENTER)||(m.which===b.ui.keyCode.SPACE)){f._toggleItemVisibility(c,this)}if((m.which===b.ui.keyCode.UP)||(m.which===b.ui.keyCode.RIGHT)||(m.which===b.ui.keyCode.DOWN)||(m.which===b.ui.keyCode.LEFT)){var i=g.indexOf(m.target);var l=(m.which===b.ui.keyCode.RIGHT)||(m.which===b.ui.keyCode.DOWN)?1:-1;var k=h.length;var j=(i+k+l)%k;h[j].focus()}})},_initFocusEvents:function(c){var h=this;var e=h._options;var g=e.selectors;var f=e.cssClasses;var d=c.children(g.accordionItem);d.off("focusin").on("focusin",function(j){var i=b(j.target).parents(g.accordionItem);if(!h._options.closingActionRecentlyTriggered){if(!i.eq(0).hasClass(f.isExpanded)){var k=i.children(g.accordionItemHeading).eq(0).children(":header")[0];h._trackItemExpanded(k)}i.removeClass(f.isCollapsed).addClass(f.isExpanded)}else{h._options.closingActionRecentlyTriggered=false}if(!h._options.multiOpen){h._collapseAllOtherItems(i)}})},_toggleItemVisibility:function(h,g){var f=this;var e=f._options.selectors;var d=f._options.cssClasses;var c=b(g);var i=c.parent(e.accordionItem);if(i.hasClass(d.isCollapsed)){if(!f._options.multiOpen){f._collapseAllOtherItems(i)}i.removeClass(d.isCollapsed).addClass(d.isExpanded);f._trackItemExpanded(g)}else{if(f._options.allClosable){i.removeClass(d.isExpanded).addClass(d.isCollapsed);f._options.closingActionRecentlyTriggered=true}}},_collapseAllOtherItems:function(f){var e=this;var d=e._options.selectors;var c=e._options.cssClasses;f.siblings(d.accordionItem).removeClass(c.isExpanded).addClass(c.isCollapsed)},_trackItemExpanded:function(d){var c={action:"contentExpanded",anchorText:d.textContent.trim()};if(typeof window.measure==="function"){window.measure(c)}},init:function(c){var d=this;var e=b(c);d._initMarkupEnhancement(e);d._initEvents(e)}})})(window.PuiTheme,jQuery);