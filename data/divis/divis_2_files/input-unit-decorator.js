window.Pui=window.Pui||{};window.Pui.Components=window.Pui.Components||{};(function(a,b){a.PuiInputUnitDecorator=function(c){var d=this;d._init(c)};b.extend(a.PuiInputUnitDecorator.prototype,{_defaults:{$scope:null,locale:"cs-CZ",localizeNumberFormat:true,selectors:{scope:"html",itemToDecorate:".pui-js-is-unit-decorated input",elementHasUnit:".pui-js-has-unit"},cssClasses:{elementHasUnit:"pui-js-has-unit"},data:{inputUnit:"unit",inputValue:"value",inputInflection:"unit-inflection",isDecorated:"unit-decorated"},inflection:{day:{1:"den",2:"dny",5:"dní"},month:{1:"měsíc",2:"měsíce",5:"měsíců"},year:{1:"rok",2:"roky",5:"let"}}},_options:{},_eventNamespace:".puiInputUnitDecorator",_initComponentsOnPage:function(){var h=this;var d=h._options;var g=d.selectors;var f=d.cssClasses;var i=d.data;var c=d.$scope;if(!c){c=b(g.scope)}var e=c.find(g.itemToDecorate);e.addClass(f.elementHasUnit);e.each(function(){var j=b(this);h._initInputDataAttributes(j);var k=j.data(i.inputUnit);var l=Number(j.data(i.inputValue));h.decorateField(j);h._initEvents(j,k,l)})},_initInputDataAttributes:function(c){var e=this;var d=e._options;var f=d.data;c.data(f.inputValue,c.val())},_initEvents:function(c){var d=this;c.off("focus"+d._eventNamespace).on("focus"+d._eventNamespace,function(){d.undecorateField(c)});c.off("blur"+d._eventNamespace).on("blur"+d._eventNamespace,function(){d.decorateField(c)});c.off("externalChange"+d._eventNamespace).on("externalChange"+d._eventNamespace,function(){c.data(d._options.data.isDecorated,"false");d.decorateField(c)})},_getInflectedUnit:function(i,h){var g=this;var e=g._options;var d=e.inflection[i];if(!d){return i}var c;for(var f in d){if(d.hasOwnProperty(f)){if(Number(f)<=h){c=d[f]}}}return c},decorateField:function(d){var g=this;var f=g._options;var j=f.data;if(d.data(j.isDecorated)==="true"){return false}var h=d.val();var i=d.data(j.inputUnit);var e=g._getInflectedUnit(i,h);d.data(j.inputValue,h);d.data(j.isDecorated,"true");var c=h;if(f.localizeNumberFormat){c=Number(h).toLocaleString(f.locale)}d.val(c+" "+e)},undecorateField:function(c){var e=this;var d=e._options;var g=d.data;if(c.data(g.isDecorated)==="false"){return false}var f=c.data(g.inputValue);c.val(f);c.data(g.isDecorated,"false")},_init:function(c){var d=this;d._options=b.extend(true,{},d._defaults,c||{});d._initComponentsOnPage()}})})(window.Pui.Components,jQuery);