window.PuiTheme=window.PuiTheme||{};(function(a,b){a.ChatBot=function(c){this._init(c)};b.extend(a.ChatBot.prototype,{_defaults:{selectors:{scope:".pui-m-chatbot-loan",chatWrapper:".npw-c-chat",collapseButton:".npw-js-collapse",expandButton:".npw-js-expand"},classes:{isCollapsed:"npw-is-collapsed",isExpanded:"npw-is-expanded"},dataAttributes:{expandDelay:"chatExpandDelay"},$elements:{},chatBotIdAttribute:"data-chatbot-id",chatBotId:"Chatbot.Default",eventNamespace:".chatBot"},_options:{},_init:function(d){var e=this;e._options=b.extend(true,{},e._defaults,d||{});e._options.$scope=b(e._options.selectors.scope);var c=e._options.$scope;var h=b(e._options.selectors.chatWrapper,c);if(h.length>0){h=b(h[0]);e._options.$elements.chatWrapper=h;e._options.$elements.collapseButton=b(e._options.selectors.collapseButton,h);e._options.$elements.expandButton=b(e._options.selectors.expandButton,h);e._setChatBotCustomId();var f=e._options.chatBotId;e._bindEvents();e._bindWidgetExpand();try{measure({action:"chatLoaded",chatType:f})}catch(g){}}},_setChatBotCustomId:function(){var c=this;var d=c._options.$scope.attr(c._options.chatBotIdAttribute);if(d){c._options.chatBotId=d}},_bindEvents:function(){var e=this;var c=e._options;var d=c.$elements.collapseButton;var g=c.$elements.expandButton;var f=c.chatBotId;d.off("click"+c.eventNamespace).on("click"+c.eventNamespace,function(){e._chatWidgetCollapse();try{measure({action:"chatMinimized",chatType:f})}catch(h){}});g.off("click"+c.eventNamespace).on("click"+c.eventNamespace,function(){e._chatWidgetExpand();try{measure({action:"chatOpened",chatType:f,openType:"manual"})}catch(h){}})},_chatWidgetCollapse:function(){var d=this;var c=d._options.classes;var e=d._options.$elements.chatWrapper;e.addClass(c.isCollapsed).removeClass(c.isExpanded)},_getWidgetExpandDelay:function(){var d=this;var c;var e=d._options.$scope.data(d._options.dataAttributes.expandDelay);e=parseInt(e,10);if(e){c=e}else{c=0}return c},_bindWidgetExpand:function(){var e=this;var d=e._options;var c=e._getWidgetExpandDelay();var f=d.chatBotId;window.setTimeout(function(){e._chatWidgetExpand();try{measure({action:"chatOpened",chatType:f,openType:"automatic"})}catch(g){}},c)},_chatWidgetExpand:function(){var d=this;var c=d._options.classes;var e=d._options.$elements.chatWrapper;e.addClass(c.isExpanded).removeClass(c.isCollapsed)}})})(window.PuiTheme,jQuery);(function(a,b){b(document).ready(function(){if(typeof a.ChatBot!=="undefined"){new a.ChatBot()}})})(window.PuiTheme,jQuery);