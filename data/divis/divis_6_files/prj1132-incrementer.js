window.PuiTheme=window.PuiTheme||{};(function(a,b){a.IncrementerHtml=function(c){var d=this;d._options=b.extend(true,{},d._defaults,c||{})};b.extend(a.IncrementerHtml,{_instances:{},_defaultInstance:"_default",initWidget:function(f,e,d){var c=a.IncrementerHtml._getInstance(d);if(typeof c==="undefined"){c=new a.IncrementerHtml(f);a.IncrementerHtml._setInstance(c,d)}c.init(e);return c},_getInstance:function(c){if(typeof c==="undefined"){c=a.IncrementerHtml._defaultInstance}return a.IncrementerHtml._instances[c]},_setInstance:function(c,d){if(typeof d==="undefined"){d=a.IncrementerHtml._defaultInstance}a.IncrementerHtml._instances[d]=c}});b.extend(a.IncrementerHtml.prototype,{_defaults:{selectors:{html:"html",component:".html-c-incrementer",incrementField:".html-has-incrementer-on input",buttonIncrease:".html-is-increase .html-button",buttonDecrease:".html-is-decrease .html-button"},cssClasses:{isMuted:"html-is-muted"},stepLength:1000,rangeMax:1000000000,rangeMin:0,longPressDetectTimeout:500,longPressCountingIntervalStepFrom:200,longPressCountingIntervalStepTo:3,longPressCountingIntervalSpeed:7,methods:{increase:function(d,c){var e=parseInt(d.val())||0;d.val(e+c);d.trigger(this._events.increase)},decrease:function(e,c){var d=parseInt(e.val())||0;e.val(d-c);e.trigger(this._events.decrease)},checkLimitReached:function(f,g,c){var d=parseInt(f.val())||0;var e=g.parent();e.removeClass(this._defaults.cssClasses.isMuted);if(d===c){e.addClass(this._defaults.cssClasses.isMuted)}}}},_events:{increase:"incrementerIncrease",decrease:"incrementerDecrease"},_options:{},_eventNamespace:".IncrementerHtml",_intervals:{longPressCountingInterval:null,longPressCounting:0},_timeouts:{longPressDetectTimer:null,longPressDetect:false},_initComponent:function(c){var h=this;var f=h._options;var g=f.selectors;var d=c.find(g.incrementField);var i=c.find(g.buttonIncrease);var e=c.find(g.buttonDecrease);f.methods.checkLimitReached.call(h,d,i,f.rangeMax);f.methods.checkLimitReached.call(h,d,e,f.rangeMin);i.off("click"+h._eventNamespace).on("click"+h._eventNamespace,function(){h._pressActionEnd();f.methods.increase(d,f.stepLength);h._trackAction(d,"increase")});i.off("mousedown"+h._eventNamespace+" touchstart"+h._eventNamespace+" pointerdown"+h._eventNamespace).on("mousedown"+h._eventNamespace,function(){h._pressActionStart(d,true)}).on("touchstart"+h._eventNamespace,function(){h._pressActionStart(d,true)});i.off("mouseup"+h._eventNamespace+" mouseout"+h._eventNamespace+" touchend"+h._eventNamespace+" touchleave"+h._eventNamespace+" touchcancel"+h._eventNamespace).on("mouseup"+h._eventNamespace+" mouseout"+h._eventNamespace,function(){h._pressActionEnd()}).on("touchend"+h._eventNamespace+" mouseout"+h._eventNamespace,function(){h._pressActionEnd()});i.off("stopIncrementerButtonPressAction").on("stopIncrementerButtonPressAction",function(){h._pressActionEnd()});e.off("click"+h._eventNamespace).on("click"+h._eventNamespace,function(){f.methods.decrease(d,f.stepLength);h._trackAction(d,"decrease")});e.off("mousedown"+h._eventNamespace).on("mousedown"+h._eventNamespace,function(){h._pressActionStart(d,false)}).on("touchstart"+h._eventNamespace,function(){h._pressActionStart(d,false)});e.off("mouseup"+h._eventNamespace+" mouseout"+h._eventNamespace+" touchend"+h._eventNamespace+" touchleave"+h._eventNamespace+" touchcancel"+h._eventNamespace).on("mouseup"+h._eventNamespace+" mouseout"+h._eventNamespace,function(){h._pressActionEnd()}).on("touchend"+h._eventNamespace,function(){h._pressActionEnd()});e.off("stopIncrementerButtonPressAction").on("stopIncrementerButtonPressAction",function(){h._pressActionEnd()});d.off("change.incrementer").on("change.incrementer",function(){f.methods.checkLimitReached.call(h,d,i,f.rangeMax);f.methods.checkLimitReached.call(h,d,e,f.rangeMin)});d.on("externalChange",function(){f.methods.checkLimitReached.call(h,d,i,f.rangeMax);f.methods.checkLimitReached.call(h,d,e,f.rangeMin)})},_trackAction:function(d,e){if(typeof measure==="function"){var l=d.data("digital-tracking-name");var k=d.attr("name");var i=l||k;var f={increase:"plus",decrease:"minus"};var j="";if(window.Npw.Calc){var g=window.Npw.Calc.Loader.prototype.selectors.calculatorApp.replace(/^\./,"");var c=document.getElementsByClassName(g)[0];var h=d[0];if(c&&h){if(b.contains(c,h)){j=window.Npw.Calc.trackingData.get("calcName")}}}measure({action:"valueUpdated",calc:j,fieldname:i,fieldtype:f[e]})}},updateLimits:function(d,c){if(d!==null){this._options.rangeMin=d}if(c!==null){this._options.rangeMax=c}},_pressActionStart:function(c,g){var f=this;var e=f._options;var d=f._timeouts;if(d.longPressDetectTimer===null){d.longPressDetectTimer=setTimeout(function(){f._runCounting(c,g)},e.longPressDetectTimeout)}},_pressActionEnd:function(){var e=this;var c=e._timeouts;var d=e._intervals;if(c.longPressDetectTimer!==null){clearTimeout(c.longPressDetectTimer);clearInterval(d.longPressCountingInterval);c.longPressDetectTimer=null;c.longPressDetect=false}},_runCounting:function(e,i){var h=this;var g=h._options;var f=h._timeouts;var j=g.longPressCountingIntervalStepFrom;var d=g.longPressCountingIntervalStepTo;var c=j;f.longPressDetect=true;h._runInterval(h,g,e,i,j,d,c)},_runInterval:function(h,f,e,i,j,d,c){var g=h._intervals;g.longPressCountingInterval=setInterval(function(){if(i){f.methods.increase(e,f.stepLength)}else{f.methods.decrease(e,f.stepLength)}if(g.longPressCounting%2===0){clearInterval(g.longPressCountingInterval);c=((c-(d*f.longPressCountingIntervalSpeed))>=d)?(c-(d*f.longPressCountingIntervalSpeed)):d;g.longPressCounting=1;h._runInterval(h,f,e,i,j,d,c)}g.longPressCounting++},c)},init:function(e){var g=this;var d=g._options;var f=d.selectors;var h=b(e);var c=b(f.component,h);c.each(function(i,j){g._initComponent(b(j))})}})})(window.PuiTheme,jQuery);