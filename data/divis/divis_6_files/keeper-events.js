"use strict";window.Npw=window.Npw||{};(function(d,e,f){function c(h){d.Utils.log("[Events] "+h)}function b(){e("#"+d.identifiers.getShowHelpControlId()).click(function(){d.state.ignoreNextStatusBarClick(true);d.controller.showHelp()});e("#"+d.identifiers.getCloseHelpControlId()).click(function(h){h.preventDefault();d.controller.closeHelp()});e("#"+d.identifiers.getStatusBarId()).click(function(){if(!d.state.ignoreNextStatusBarClick()){d.controller.expandOrCollapse()}else{d.state.ignoreNextStatusBarClick(false)}})}function g(){e("#"+d.identifiers.getMessageTextAreaId()).keydown(function(h){if(h.keyCode===13&&!h.shiftKey){h.preventDefault();e("#"+d.identifiers.getMessageFormWrapperId()+" form").submit()}})}function a(){e("body").prepend("<div class='npw-chat-container'></div>");var i=e("#"+d.identifiers.getChatWrapperId());var h;i.draggable({containment:".npw-chat-container",handle:"#"+d.identifiers.getStatusBarId(),start:function(){i.addClass("npw-is-dragged");d.state.movingOrResizing(true)},stop:function(){d.state.ignoreNextStatusBarClick(true);d.state.movingOrResizing(false);d.controller.move()}}).resizable({containment:".npw-chat-container",handles:"all",start:function(){i.addClass("npw-is-dragged");h=i.height();c("Original height: "+h)},resize:function(k,l){var j=l.size.height;if(j>0){var m=j-h;c("Previous height: "+h+" / height: "+j+" / delta: "+m);h=j;if(m!==0){d.window.updateMessageWrapperHeight(m)}}else{c("Zero height")}},stop:function(){d.controller.resize()}})}d.initializeEvents=function(){e("#"+d.identifiers.getMessageFormWrapperId()+" form").submit(function(h){h.preventDefault();d.controller.send()});g();e("#"+d.identifiers.getEmailFormWrapperId()+" form").submit(function(h){h.preventDefault();d.controller.sendTranscript()});e("#"+d.identifiers.getFinishChatControlId()).click(function(){d.controller.finish()});e("#"+d.identifiers.getStartChatOverControlId()).click(function(){d.controller.prepareStartOver()});e("#"+d.identifiers.getCloseChatControlId()).click(function(){d.controller.close()});b();a()}}(Npw.ChatKeeper=Npw.ChatKeeper||{},jQuery));