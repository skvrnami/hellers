window.PuiTheme=window.PuiTheme||{};(function(a,b){a.CtaBlockHtml=function(c){var d=this;d._options=b.extend({},d._defaults,c||{})};b.extend(a.CtaBlockHtml,{_instances:{},_defaultInstance:"_default",initWidget:function(f,e,d){var c=a.CtaBlockHtml._getInstance(d);if(typeof c==="undefined"){c=new a.CtaBlockHtml(f);a.CtaBlockHtml._setInstance(c,d)}c.init(e)},_getInstance:function(c){if(typeof c==="undefined"){c=a.CtaBlockHtml._defaultInstance}return a.CtaBlockHtml._instances[c]},_setInstance:function(c,d){if(typeof d==="undefined"){d=a.CtaBlockHtml._defaultInstance}a.CtaBlockHtml._instances[d]=c}});b.extend(a.CtaBlockHtml.prototype,{_defaults:{selectors:{html:"html",parentCtaBlock:".pui-m-cta-block",component:".html-c-cta-block",componentExpandable:".html-c-cta-block.html-is-expandable",contentContainer:".html-b-content",buttonControl:".html-b-control"},cssClasses:{isExpanded:"html-is-expanded"}},_attributes:{ariaHidden:"aria-hidden"},_data:{},_options:{},_eventNamespace:".CtaBlockHtml",_initEvents:function(h){var f=this;var d=f._options;var e=d.selectors;var g=b(e.component,h);var c=b(e.componentExpandable,h);g.each(function(j,k){var i=b(k);f._initEventsTracking(i)});c.each(function(j,k){var i=b(k);f._initEventsToggle(i)})},_initEventsOutsideComponent:function(){var c=this;b(document).off("click"+c._eventNamespace).on("click"+c._eventNamespace,function(f){var d=false;if(f.originalEvent){d=f.originalEvent._htmlCtaBlockToggleEvent}if(!d){c._collapseAllContents()}})},_collapseAllContents:function(){var f=this;var c=f._attributes;var e=f._options.selectors;var d=f._options.cssClasses;var g=b(e.componentExpandable);g.removeClass(d.isExpanded);g.find(e.contentContainer).attr(c.ariaHidden,"true")},_initEventsToggle:function(c){var g=this;var d=g._options;var f=d.cssClasses;var e=d.selectors;c.find(e.buttonControl).on("click"+g._eventNamespace+" keypress"+g._eventNamespace,function(h){if(h.type==="click"||h.which==13){g._toggleContent(c)}});c.on("click"+g._eventNamespace,function(h){if(h.originalEvent){h.originalEvent._htmlCtaBlockToggleEvent=true}});c.on("focusout"+g._eventNamespace,function(){var h=b(this);setTimeout(function(){if(h.has(b(document.activeElement)).length===0&&c.hasClass(f.isExpanded)){g._toggleContent(c)}},0)})},_toggleContent:function(c){var i=this;var f=i._options;var e=i._attributes;var h=f.selectors;var g=f.cssClasses;var j=c.hasClass(g.isExpanded);var d=c.closest(h.parentCtaBlock);b(h.component,d).removeClass(g.isExpanded).find(h.contentContainer).attr(e.ariaHidden,"true");c.toggleClass(g.isExpanded,!j);c.find(h.contentContainer).attr(e.ariaHidden,j.toString())},_initEventsTracking:function(c){var f=this;var d=f._options;var e=d.selectors;c.find(e.buttonControl).on("click"+f._eventNamespace,function(){if(window.measure&&typeof window.measure==="function"){if(typeof window.Npw.Calc!=="undefined"){var h=window.Npw.Calc.trackingData.hasOwnProperty("calcStateUpdated");var i=window.Npw.Calc.trackingData.get("calcStateUpdated");var j=typeof i==="undefined";if(i||j){var g={action:"calculationFinished",calc:window.Npw.Calc.trackingData.get("calcName")};var k=window.Npw.Calc.trackingData.get("calcStateValues");if(h){window.Npw.Calc.trackingData.set("calcStateUpdated",false)}b.extend(g,k||{});window.measure(g)}}}})},init:function(c){var d=this;var e=b(c);d._initEvents(e);d._initEventsOutsideComponent()}})})(window.PuiTheme,jQuery);