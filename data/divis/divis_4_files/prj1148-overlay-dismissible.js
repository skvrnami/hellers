window.PuiTheme=window.PuiTheme||{};(function(a,b){a.OverlaysDismissible=function(c){var d=this;d._options=b.extend(true,{},d._defaults,c||{})};b.extend(a.OverlaysDismissible,{_options:{storageNamespace:"overlays"},initWidget:function(e,d,c){var f=this;var g=b("#"+c);e.callbackFunc=f._dismissCallback;a.Overlays.initWidget(e,g,c)},open:function(c){var d=this;var e=false;if(d._isOverlayEnabled(c)){a.Overlays.open(c);e=true}return e},close:function(c,d){a.Overlays.close(c,d)},dismiss:function(c){var d=this;d._setOverlayDisplayStatus(c,false)},revoke:function(c){var d=this;d._setOverlayDisplayStatus(c,true)},_dismissCallback:function(c){var d=c.getInstanceName();a.OverlaysDismissible.dismiss(d)},_isOverlayEnabled:function(d){var c=this;var f=c._loadOverlayData();var e=f[d];return typeof e==="undefined"||e},_setOverlayDisplayStatus:function(c,e){var d=this;var f=d._loadOverlayData();f[c]=e;d._storeOverlayData(f)},_createCookie:function(e,f,g){var c;if(g){var d=new Date();d.setTime(d.getTime()+(g*24*60*60*1000));c="; expires="+d.toGMTString()}else{c=""}document.cookie=e+"="+f+c+"; path=/"},_readCookie:function(d){var c=d+"=";var g=document.cookie.split(";");for(var f=0;f<g.length;f++){var e=g[f];while(e.charAt(0)===" "){e=e.substring(1,e.length)}if(e.indexOf(c)===0){return e.substring(c.length,e.length)}}return undefined},_eraseCookie:function(c){var d=this;d._createCookie(c,"",-1)},_localStorageSafeRead:function(c){var d=this;var f="";try{f=localStorage[c];if(typeof f==="undefined"){throw ("localStorageEmpty")}}catch(e){if(console&&(typeof console.warn==="function")){if(e==="localStorageEmpty"){console.warn("localstorage EMPTY, trying to read cookies")}else{console.warn("localstorage read FAILED")}f=d._readCookie(c)}}return f},_localStorageSafeWrite:function(c,d){var e=this;try{localStorage[c]=d}catch(f){if(console&&(typeof console.warn==="function")){console.warn("localstorage write FAILED");e._createCookie(c,d,3000)}}},_storeOverlayData:function(e){var d=this;var c=d._options.storageNamespace;d._localStorageSafeWrite(c,JSON.stringify(e))},_loadOverlayData:function(){var d=this;var c=d._options.storageNamespace;var g=d._localStorageSafeRead(c);var f=null;try{f=JSON.parse(g)}catch(e){f={};d._storeOverlayData(f)}return f}})})(window.PuiTheme,jQuery);