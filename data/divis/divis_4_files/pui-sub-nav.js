window.PuiTheme=window.PuiTheme||{};(function(a,b){a.SubNavigation=function(c){var d=this;d._initSubNavigation(c)};b.extend(a.SubNavigation,{_instances:{},_defaultInstance:"_default",initWidget:function(f,e,d){var c=a.SubNavigation.getInstance(d);if(typeof c==="undefined"){c=new a.SubNavigation(f);a.SubNavigation._setInstance(c,d)}c.init(e)},getInstance:function(c){if(typeof c==="undefined"){c=a.SubNavigation._defaultInstance}return a.SubNavigation._instances[c]},_setInstance:function(c,d){if(typeof d==="undefined"){d=a.SubNavigation._defaultInstance}a.SubNavigation._instances[d]=c}});b.extend(a.SubNavigation.prototype,{_defaults:{selectors:{subNav:".html-c-subnavigation",link:".html-b-subnav-item .html-link",linkText:".html-b-subnav-item .html-text"},dataAttr:{SubNavigation:"subnav",SubNavigationCaption:"subnav-caption"}},_options:{},_eventNamespace:".PuiEventNamespace",_initComponentsOnPage:function(g){var e=this;var c=e._options;var d=c.selectors;var f=b(d.subNav,g);f.each(function(i,j){var h=b(j);e._findAnchor(h);e._scrollToAnchor(h)})},_findAnchor:function(){var c=this;var q=c._options;var l=q.selectors;var g=q.dataAttr;var h=b("[data-subnav]");var j=h.length;var f=b(l.subNav).find("ul");for(var d=0;d<j;d++){var n=h.eq(d);var e=n.text();var o=n.data(g.SubNavigationCaption);var p=n.attr("id");var k=o?o:e;var m=b('<li class="html-b-subnav-item"><a href="#'+p+'" class="html-link"><span class="html-text">'+k+"</span></a></li>");f.append(m)}},_scrollToAnchor:function(){var e=this;var c=e._options;var d=c.selectors;var f=b(d.subNav);var h=f.find(d.link);function g(j){var i=b(j);a.ScrollHelper.scrollToView(i)}b(window).off("popstate"+e._eventNamespace).on("popstate"+e._eventNamespace,function(j){var i=false;if(j.originalEvent){i=j.originalEvent.state}if(!i||i.type!=="submenuAnchor"){return}g(i.targetSelector)});h.off("click"+e._eventNamespace).on("click"+e._eventNamespace,function(i){i.preventDefault();g(this.hash);e._trackAnchorClick(i.target);window.history.pushState({type:"submenuAnchor",targetSelector:this.hash},"TODO: Title",this.hash)})},_trackAnchorClick:function(d){var c={action:"anchorClick",anchorText:b(d).text()};if(typeof window.measure==="function"){window.measure(c)}},_initSubNavigation:function(c){var d=this;d._options=b.extend({},d._defaults,c||{});d._initComponentsOnPage()},init:function(c){var d=this;var e=b(c);d._initComponentsOnPage(e)}})})(window.PuiTheme,jQuery);(function(a,b){b(document).ready(function(){if(typeof a.SubNavigation!=="undefined"){a.SubNavigation.initWidget()}})})(window.PuiTheme,jQuery);