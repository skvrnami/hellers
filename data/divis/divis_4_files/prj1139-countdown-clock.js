window.PuiTheme=window.PuiTheme||{};(function(a,b){a.CountdownClock=function(c){this._init(c)};b.extend(a.CountdownClock.prototype,{_defaults:{selectors:{scope:"body",countdownWrapper:".html-c-countdown-clock"},classes:{finished:"html-is-finished",active:"html-is-active"},dataAttributes:{granularity:"granularity",countdownEnd:"countdown-end"},ticker:undefined,displayFormat:{showDays:["days","hours","minutes","seconds"],showHours:["hours","minutes","seconds"],showMinutes:["minutes","seconds"],showSeconds:["seconds"],showDaysOnly:"days"},documentLanguage:"cs",locales:["cs","en"],inflections:{cs:{days:{"0":"dní","1":"den","2":"dny","5":"dní"},hours:{"0":"hodin","1":"hodina","2":"hodiny","5":"hodin"},minutes:{"0":"minut","1":"minuta","2":"minuty","5":"minut"},seconds:{"0":"vteřin","1":"vteřina","2":"vteřiny","5":"vteřin"}},en:{days:{"0":"days","1":"day","2":"days"},hours:{"0":"hours","1":"hour","2":"hours"},minutes:{"0":"minutes","1":"minute","2":"minutes"},seconds:{"0":"seconds","1":"second","2":"seconds"}}},$elements:{},countdowns:[],eventNamespace:".countdownClock"},_options:{},_init:function(d){var e=this;e._options=b.extend(true,{},e._defaults,d||{});e._options.$scope=b(e._options.selectors.scope);var c=e._options.$scope;e._detectLanguage();e._initCountdowns(c);e._startCountDown()},_getUnixTime:function(c){return Date.parse(c)},_getTimeDiff:function(c,f){var l=new Date(c);var g=new Date(f);l.setHours(0,0,0,0);g.setHours(0,0,0,0);var h=f-c;var n=Math.floor((h/1000)%60);var d=Math.floor((h/1000/60)%60);var m=Math.floor((h/(1000*60*60))%24);var i=Math.floor((h/(1000*60*60)));var o=Math.floor(h/(1000*60*60*24));var k=Math.floor((g-l)/(1000*60*60*24));var j=k;var e=m;if(k===1){j=0;if(i>=24){e+=24}}else{if(k>1){j=o}}return{total:h,days:o,daysCalendar:k,daysNormalized:j,hours:m,hoursNormalized:e,minutes:d,seconds:n}},_updateClock:function(h,e){var g=this;var d=g._options;var f=d.classes;var c=d.displayFormat;var i=d.inflections[d.documentLanguage];if(h.isActive){if(e.total>0){if(h.$daysValue){var j;if(h.granularity===c.showDaysOnly){j=e.daysCalendar}else{j=e.daysNormalized}h.$daysValue.html(j);h.$daysLabel.html(g._unitInflector(j.toString(),i.days))}if(h.$hoursValue){h.$hoursValue.html(e.hoursNormalized);h.$hoursLabel.html(g._unitInflector(e.hours.toString(),i.hours))}if(h.$minutesValue){h.$minutesValue.html(("0"+e.minutes).slice(-2));h.$minutesLabel.html(g._unitInflector(e.minutes.toString(),i.minutes))}if(h.$secondsValue){h.$secondsValue.html(("0"+e.seconds).slice(-2));h.$secondsLabel.html(g._unitInflector(e.seconds.toString(),i.seconds))}}else{h.isActive=false;h.$element.addClass(f.finished);h.$element.removeClass(f.active);if(h.$daysValue){h.$daysValue.html("0");h.$daysLabel.html(i.days["0"])}if(h.$hoursValue){h.$hoursValue.html("0");h.$hoursLabel.html(i.hours["0"])}if(h.$minutesValue){h.$minutesValue.html("00");h.$minutesLabel.html(i.minutes["0"])}if(h.$secondsValue){h.$secondsValue.html("00");h.$secondsLabel.html(i.seconds["0"])}}}},_initCountdowns:function(i){var c=this;var k=c._options;var h=k.selectors;var e=k.classes;var g=k.inflections[k.documentLanguage];var f=b(h.countdownWrapper,i);var j=k.countdowns;var d=c._getUnixTime(new Date());f.each(function(){var l=b(this);if(l.hasClass(e.active)||l.hasClass(e.finished)){return}var n={$element:l,granularity:l.data(k.dataAttributes.granularity),deadline:c._getUnixTime(l.data(k.dataAttributes.countdownEnd))};var m=c._getTimeDiff(d,n.deadline);n.$element.append('<div class="html-b-countdown-field pui-days"><div class="html-b-value pui-js-days-value">&nbsp;</div><div class="html-b-label pui-js-days-label">'+c._unitInflector("0",g.days)+"</div></div>");n.$daysValue=b(".pui-js-days-value",n.$element);n.$daysLabel=b(".pui-js-days-label",n.$element);if(k.displayFormat.showHours.indexOf(n.granularity)>-1){n.$element.append('<div class="html-b-countdown-field pui-hours"><div class="html-b-value pui-js-hours-value">&nbsp;</div><div class="html-b-label pui-js-hours-label">'+c._unitInflector("0",g.hours)+"</div></div>");n.$hoursValue=b(".pui-js-hours-value",n.$element);n.$hoursLabel=b(".pui-js-hours-label",n.$element)}else{n.$hoursValue=undefined;n.$hoursLabel=undefined}if(k.displayFormat.showMinutes.indexOf(n.granularity)>-1){n.$element.append('<div class="html-b-countdown-field pui-minutes"><div class="html-b-value pui-js-minutes-value">&nbsp;</div><div class="html-b-label pui-js-minutes-label">'+c._unitInflector("0",g.minutes)+"</div></div>");n.$minutesValue=b(".pui-js-minutes-value",n.$element);n.$minutesLabel=b(".pui-js-minutes-label",n.$element)}else{n.$minutesValue=undefined;n.$minutesLabel=undefined}if(k.displayFormat.showSeconds.indexOf(n.granularity)>-1){n.$element.append('<div class="html-b-countdown-field pui-seconds"><div class="html-b-value pui-js-seconds-value">&nbsp;</div><div class="html-b-label pui-js-seconds-label">'+c._unitInflector("0",g.seconds)+"</div></div>");n.$secondsValue=b(".pui-js-seconds-value",n.$element);n.$secondsLabel=b(".pui-js-seconds-label",n.$element)}else{n.$secondsValue=undefined;n.$secondsLabel=undefined}n.isActive=true;n.$element.addClass(e.active);c._updateClock(n,m);j.push(n)})},_startCountDown:function(){var d=this;var c=d._options;if(typeof c.ticker!=="undefined"){clearInterval(c.ticker)}c.ticker=setInterval(function(){var j=c.countdowns;var h=d._getUnixTime(new Date());for(var f=0;f<j.length;f++){var g=j[f];var e=d._getTimeDiff(h,g.deadline);d._updateClock(g,e)}},1000)},_stopCountDown:function(){var d=this;var c=d._options;clearInterval(c.ticker);c.ticker=undefined},_unitInflector:function(e,d){var c=-Infinity;b.each(d,function(f,g){if(f<=Math.abs(e)&&f>c){c=f}});return d[c]},_detectLanguage:function(){var e=this;var d=e._options;var c=d.locales;var f=document.documentElement.lang.split("-")[0];if(c.indexOf(f)){d.documentLanguage=f}},addCountdownInstances:function(c){var d=this;d._initCountdowns(c)}})})(window.PuiTheme,jQuery);(function(a,b){b(document).ready(function(){if(typeof a.CountdownClock!=="undefined"){a.countdownClockInstance=new a.CountdownClock()}})})(window.PuiTheme,jQuery);